package com.cpg.empspringmvc.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.orm.jpa.LocalEntityManagerFactoryBean;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.PostMapping;

import com.cpg.empspringmvc.bean.EmployeeBean;
import com.cpg.springmvc.beans.User;

@Configuration
public class ORMConfig {
	@Bean

	public LocalEntityManagerFactoryBean getLocalEntityManagerFactoryBean () {

		LocalEntityManagerFactoryBean bean=new LocalEntityManagerFactoryBean();
		bean.setPersistenceUnitName("employee-unit");
		return bean;
	}


@PostMapping("/register")
//public String form(String name,String email,String password,String gender,ModelMap map) {
	public String form(EmployeeBean bean,ModelMap map) {	
	
	map.addAttribute("name",bean.getName());
	map.addAttribute("email",bean.getEmail());
	map.addAttribute("password",bean.getPassword());
	map.addAttribute("gender",bean.getId());
	
	return "register";
}
}
package com.cpg.empspringmvc.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.orm.jpa.LocalEntityManagerFactoryBean;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.PostMapping;

import com.cpg.springmvc.beans.User;

@Configuration
public class ORMConfig {
	@Bean

	public LocalEntityManagerFactoryBean getLocalEntityManagerFactoryBean () {

		LocalEntityManagerFactoryBean bean=new LocalEntityManagerFactoryBean();
		bean.setPersistenceUnitName("employee-unit");
		return bean;
	}
}

@PostMapping("/form")
//public String form(String name,String email,String password,String gender,ModelMap map) {
	public String form(User user,ModelMap map) {	
	
	map.addAttribute("name",user.getName());
	map.addAttribute("email",user.getEmail());
	map.addAttribute("password",user.getPassword());
	map.addAttribute("gender",user.getGender());
	
	return "form";
}